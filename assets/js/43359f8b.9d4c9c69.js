"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2587],{6774:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"llm-prompt-kit","title":"LLM Prompt Kit","description":"Copy/paste the sections you need when asking an LLM for help with ModularComponent.","source":"@site/docs/llm-prompt-kit.md","sourceDirName":".","slug":"/llm-prompt-kit","permalink":"/docs/llm-prompt-kit","draft":false,"unlisted":false,"editUrl":"https://github.com/modular-component/website/docs/llm-prompt-kit.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"LLM Prompt Kit"},"sidebar":"tutorialSidebar","previous":{"title":"Reference","permalink":"/docs/reference"}}');var s=n(4848),r=n(8453);const i={sidebar_position:6,title:"LLM Prompt Kit"},a="LLM Prompt Kit",l={},c=[{value:"LLMs.txt file",id:"llmstxt-file",level:2},{value:"How to use this page",id:"how-to-use-this-page",level:2},{value:"Architecture Snapshot",id:"architecture-snapshot",level:2},{value:"Factory Contract",id:"factory-contract",level:2},{value:"Stage &amp; Extension Cheat Sheet",id:"stage--extension-cheat-sheet",level:2},{value:"Example Pipeline (copy/adapt)",id:"example-pipeline-copyadapt",level:2},{value:"Project Context Appendix",id:"project-context-appendix",level:2},{value:"Troubleshooting quick refs",id:"troubleshooting-quick-refs",level:2},{value:"Diagnostic checklist (copy/paste when debugging)",id:"diagnostic-checklist-copypaste-when-debugging",level:3}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"llm-prompt-kit",children:"LLM Prompt Kit"})}),"\n",(0,s.jsx)(t.p,{children:"Copy/paste the sections you need when asking an LLM for help with ModularComponent.\nThis gives the model the right mental model before it sees your question or code."}),"\n",(0,s.jsx)(t.h2,{id:"llmstxt-file",children:"LLMs.txt file"}),"\n",(0,s.jsxs)(t.p,{children:["This documentation provides an ",(0,s.jsx)("a",{href:"/llms.txt",children:"LLMs.txt"})," file for easy parsing of context\nand navigation by LLMs. You can point LLMs to that file by copying its link above."]}),"\n",(0,s.jsx)(t.h2,{id:"how-to-use-this-page",children:"How to use this page"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Grab the Architecture Snapshot so the LLM knows what ModularComponent does."}),"\n",(0,s.jsxs)(t.li,{children:["Add the Factory Contract when the question touches ",(0,s.jsx)(t.code,{children:".with"}),", ",(0,s.jsx)(t.code,{children:".use"}),", ",(0,s.jsx)(t.code,{children:".stage"}),", or ",(0,s.jsx)(t.code,{children:".force"}),"."]}),"\n",(0,s.jsx)(t.li,{children:"Include the Stage/Extension Cheat Sheet when discussing specific stages or extensions."}),"\n",(0,s.jsx)(t.li,{children:"Paste the Example Pipeline (and tweak names) when you need the model to reason about ordering or data flow."}),"\n",(0,s.jsx)(t.li,{children:"Append the Project Context Appendix filled with your stages or constraints."}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"architecture-snapshot",children:"Architecture Snapshot"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"- ModularComponent is a factory for React components/hooks; you never write the component function directly.\n- Each `.with(StageFn())` call adds a stage to an ordered pipeline. Stages fill fields on a shared arguments map\n  (e.g. `props`, `lifecycle`, `render`, or any custom key).\n- Downstream stages can read everything upstream provided. A field can be assigned once; use `.force*` to override deliberately.\n- A render stage must return React nodes. If no render is defined, the factory injects a `() => null` render.\n- The factory result is both a React component and a bundle of helpers (`withDefaultProps`, `withLifecycle`, etc.).\n- You can turn the pipeline into hooks via `.use()` or isolate a field via `.stage('field')` for testing.\n\nReference doc: https://modularcomponent.dev/docs/concepts\n"})}),"\n",(0,s.jsx)(t.h2,{id:"factory-contract",children:"Factory Contract"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"Base factory:\n  const MyComponent = ModularComponent<Props, Ref?>(displayName?)\n  - Optional `displayName` sets `Component.displayName` for React DevTools.\n  - Generic `Props` defines accepted props. Generic `Ref` enables forwarding via `forwardRef`.\n\nStage methods:\n  .with(stageFn())          // add/replace a field; respects type constraints\n  .force(stageFn())         // same as with() but bypasses constraint compatibility\n  .withFoo(...)             // created via ModularComponent.register({ foo })\n  - Stage functions must return `{ field: string; provide(args) => value }`.\n  - `provide` receives all previously defined fields, plus `props` and `ref`.\n\nHooks/extraction helpers:\n  .use()            // returns a hook giving the full arguments map (or requires props if needed)\n  .use('field')     // returns just the specified field; stops pipeline after that stage\n  .stage('field')   // returns a hook (or component if field renders React nodes) for isolated testing\n\nDisplay name helper:\n  .withDisplayName('Name')  // set displayName mid-pipeline if you skipped the constructor arg or if you're\n                            // reusing a base pipeline to build multiple components\n"})}),"\n",(0,s.jsx)(t.h2,{id:"stage--extension-cheat-sheet",children:"Stage & Extension Cheat Sheet"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"Built-in / official stage sources:\n  | Package                                    | Stage helpers                                     | Field(s)                  | Purpose                                         |\n  |--------------------------------------------|---------------------------------------------------|---------------------------|-------------------------------------------------|\n  | @modular-component/default                 | defaultProps, lifecycle, render                   | props, lifecycle, render  | Sensible defaults to get started quickly.       |\n  | @modular-component/with-default-props      | defaultProps                                      | props                     | Provide default prop values & tighten types.    |\n  | @modular-component/with-lifecycle          | lifecycle                                         | lifecycle                 | Run React hooks/business logic outside render.  |\n  | @modular-component/with-fragment           | fragment, fragments                               | User-provided             | Add React nodes fragments to be used in render. |\n  | @modular-component/with-components         | components                                        | components                | Inject other components into the pipeline.      |\n  | @modular-component/with-conditional-render | condition, conditionalFallback, conditionalRender | User-provided, render     | Guard render output with conditions.            |\n\nDescribe your own stage like this:\n  Stage name: withLocale(key)\n  Field added: locale\n  Returns: (args) => string lookup function\n  Depends on: props (for language), store (for active locale)\n"})}),"\n",(0,s.jsx)(t.h2,{id:"example-pipeline-copyadapt",children:"Example Pipeline (copy/adapt)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:"import { ModularComponent } from '@modular-component/core'\nimport '@modular-component/default/register'\nimport { withLocale } from './stages/with-locale'\nimport { withAnalytics } from './stages/with-analytics'\n\nconst UserCard = ModularComponent<{ userId: string }>('UserCard')\n  .withDefaultProps({ })\n  .withAnalytics(({ props }) => ({ eventPrefix: 'user_card', userId: props.userId }))\n  .withLocale('user.card')\n  .withLifecycle(({ props, locale }) => {\n    const [user, setUser] = useUser(props.userId)\n    return { user, title: locale('title') }\n  })\n  .withRender(({ lifecycle }) => (\n    <section>\n      <h2>{lifecycle.title}</h2>\n      <p>{lifecycle.user?.name ?? 'Loading'}</p>\n    </section>\n  ))\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"Key reasoning hooks for LLMs:\n- Stage order: `withAnalytics` runs before `withLocale`, so analytics can\u2019t consume locale.\n- Lifecycle exposes `{ user, title }`, render reads it; no other stage after render will run for components.\n- `.withDefaultProps({})` reminds the reader that props typing can be tightened there.\n"})}),"\n",(0,s.jsx)(t.h2,{id:"project-context-appendix",children:"Project Context Appendix"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"Paste this appendix into your prompt and fill in the blanks.\n\nCustom stage catalog (edit rows):\n  | Stage name                | Field provided | Depends on                  | Returns / side effects                | Sample invocation           |\n  |---------------------------|----------------|-----------------------------|--------------------------------------|-----------------------------|\n  | withLocale(key: string)   | locale         | props.language, store.locale| (token) => string lookup (memoized)  | .withLocale('user.card')    |\n  | ...                       | ...            | ...                         | ...                                  | ...                         |\n\nDomain constraints / invariants:\n  - Never render without `locale` because translations drive accessibility requirements.\n  - All analytics events must include `tenantId` from props or fall back to auth context.\n  - `withFeatureFlag` must precede any stage that checks `featureFlags`.\n\nTesting hooks cheatsheet:\n  | Field        | `.stage()` helper                | Inputs you must provide manually                          |\n  |------------- |---------------------------------|-----------------------------------------------------------|\n  | lifecycle    | MyComponent.stage('lifecycle')  | `props` defaults, upstream args (`locale`, `store`, \u2026)    |\n  | render       | MyComponent.stage('render')     | Provide `props`, `lifecycle`, extra arguments for render  |\n  | customField  | <Component>.stage('customField')| Document here so the LLM knows what fake data to supply   |\n\nFill these rows once per project so LLMs can ingest them instantly.\n"})}),"\n",(0,s.jsx)(t.h2,{id:"troubleshooting-quick-refs",children:"Troubleshooting quick refs"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"- Render missing: ensure a `.withRender` (or equivalent) exists.\n- Stage conflicts: TypeScript errors often mean two stages write the same field; remove the duplicate or switch to `.force` on purpose.\n- Custom stage typing: register runtime via `ModularComponent.register({ foo })`, then add module augmentation so TypeScript understands `.withFoo` helpers. (Details: docs/usage/writing-custom-stages.md)\n- Hooks vs components: `.use()` returns hooks; `.stage()` returns hook/component for isolated testing. They do not run downstream stages beyond the targeted field.\n"})}),"\n",(0,s.jsx)(t.h3,{id:"diagnostic-checklist-copypaste-when-debugging",children:"Diagnostic checklist (copy/paste when debugging)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"| Symptom                          | Likely root cause                             | Files/API to inspect                          | Prompt hint                                                             |\n|----------------------------------|-----------------------------------------------|-----------------------------------------------|-------------------------------------------------------------------------|\n| Stage says value is `undefined`  | Stage order wrong or missing dependency       | Component definition + stage catalog          | Verify `withLocale` appears before `withRender`; restructure if needed. |\n| Types fail after registering stage | Module augmentation missing or incorrect    | types.d.ts, ModularComponent.register calls   | Confirm runtime + typing registration both run; re-sync declare module. |\n| Hook returns stale data          | Stage recreates objects each render           | Lifecycle stage implementation                | Wrap returned functions in `useCallback`/`useMemo` with proper deps.     |\n| `.stage()` tests crash           | Required args not injected when calling stage | Test helpers + stage docs                     | Provide fake `props`, `locale`, and `store` objects before invoking.     |\n| Render never runs                | No `render` stage or stage replaced downstream| Component factory + registration order        | Ensure `.withRender` exists and isn\u2019t overwritten by later `.with`.     |\n\nUse this table verbatim so the LLM can scan symptoms quickly.\n"})}),"\n",(0,s.jsx)(t.p,{children:"Feel free to append your own team-specific stages or constraints when sharing with an LLM."})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var o=n(6540);const s={},r=o.createContext(s);function i(e){const t=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);